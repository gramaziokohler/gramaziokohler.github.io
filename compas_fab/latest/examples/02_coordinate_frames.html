<!DOCTYPE html>
<html lang="en">
    <head>
        <title>compas_fab</title>

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    
        <meta name="author" content="" />
        <meta name="description" content="" />

        <link rel="shortcut icon" href="../_static/images/compas.ico" type="image/x-icon">

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous" />

        <link rel="stylesheet" type="text/css" href="../_static/css/prism.css" />
        <link rel="stylesheet" type="text/css" href="../_static/css/compas.css" />
        <link rel="stylesheet" type="text/css" href="../_static/css/compas-reference.css" />

        
            <link rel="next" title="Kinematic model" href="03_kinematic_model.html" />
        
        
        
            <link rel="prev" title="Frame and Transformation" href="01_frame_and_transformation.html" />
        

        <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>

    </head>
    <body data-spy="scroll" data-target="#compas-localnav">

        <header class="navbar navbar-expand compas-navbar justify-content-between">
            <div class="navbar-header">
                <a class="navbar-brand" href="../index.html">
                    compas_fab 0.2.1
                </a>
            </div>

            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="https://compas-dev.github.io">
                        <img src="../_static/images/compas_icon.png" width="36px" height="36px" alt="compas" />
                    </a>
                </li>
            </ul>
        </header>
        
        <div class="container-fluid compas-container">
            <div class="row flex-xl-nowrap">

                <!-- main content -->

                <main class="col-12 col-md-9 col-xl-8 compas-content" role="main">

                    

                        

                        <div class="section" id="coordinate-frames">
<h1>Coordinate frames</h1>
<p>Developers and users of robot drivers, models, and libraries need a shared convention
for coordinate frames in order to better integrate and re-use software components. To
plan robotic fabrication processes, the definition of robotic targets has to follow
the convention of a specific relationship between coordinate frames, for example:</p>
<ul class="simple">
<li><p>World coordinate frame (WCF)</p></li>
<li><p>Robot coordinate frame (RCF)</p></li>
<li><p>Tool0 coordinate frame (T0CF)</p></li>
<li><p>Tool coordinate frame (TCF)</p></li>
<li><p>Object coordinate frame (OCF)</p></li>
</ul>
<div class="figure" id="id1">
<img alt="../_images/02_coord_frames.jpg" class="figure-img img-fluid" src="../_images/02_coord_frames.jpg" />
<p class="caption"><span class="caption-text">Coordinate frame convention of a robotic setup.</span></p>
</div>
<p>To describe these coordinate frames, the <a class="reference internal" href="../reference/generated/compas_fab.geometry.Frame.html#compas_fab.geometry.Frame" title="compas_fab.geometry.Frame"><code class="xref py py-class docutils literal notranslate"><span class="pre">Frame</span></code></a> class of the <strong>COMPAS</strong>
framework is used.</p>
<div class="section" id="world-coordinate-frame-wcf">
<h2>World coordinate frame (WCF)</h2>
<p>The world coordinate frame (WCF) has its origin on a fixed position with
its Z-axis pointing upwards (= map in ROS convention).
The WCF is important for processes that use several robots which share one space,
robots with external axes, and mobile robots. By default, the WCF coincides
with the robot coordinate system (RCF).</p>
</div>
<div class="section" id="robot-coordinate-frame-rcf">
<h2>Robot coordinate frame (RCF)</h2>
<p>The robot coordinate frame (RCF) (= base_link in ROS convention) has its origin
in the base of the robot and is the reference system for the mechanical buildup
of the robot. It must be defined in reference to the fixed coordinate frame WCF.</p>
</div>
<div class="section" id="tool0-coordinate-frame-t0cf">
<h2>Tool0 coordinate frame (T0CF)</h2>
<p>The tool0 coordinate frame (T0CF) has its origin at the tip of last link of the robot.
It is dependent on the RCF.</p>
</div>
<div class="section" id="tool-coordinate-frame-tcf">
<h2>Tool coordinate frame (TCF)</h2>
<p>The tool coordinate frame (TCF) has its origin at the tip of the tool (Tool
Center Point: TCP). It must be defined in reference to the T0CF.</p>
</div>
<div class="section" id="object-coordinate-frame-ocf">
<h2>Object coordinate frame (OCF)</h2>
<p>The object coordinate frame (OCF) corresponds to the work object or the built
structure. It defines the location of the work object in relation to the world
coordinate frame (WCF).</p>
</div>
<div class="section" id="example">
<h2>Example</h2>
<p>Here is a simple example of how to express the frame of an object that is defined
in the world coordinate frame in the robot’s own coordinate frame before sending
it as a target pose to the robot.</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="kn">from</span> <span class="nn">compas_fab.robots</span> <span class="kn">import</span> <span class="n">Robot</span>

<span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">Robot</span> <span class="k">as</span> <span class="n">URDFRobot</span>
<span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">Joint</span>
<span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">Link</span>

<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">Frame</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">Transformation</span>


<span class="n">robot_model</span> <span class="o">=</span> <span class="n">URDFRobot</span><span class="p">(</span><span class="s1">&#39;ur5&#39;</span><span class="p">,</span>
            <span class="n">joints</span><span class="o">=</span><span class="p">[</span>
                <span class="n">Joint</span><span class="p">(</span><span class="s1">&#39;shoulder_pan_joint&#39;</span><span class="p">,</span> <span class="s1">&#39;revolute&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;base_link&#39;</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="s1">&#39;shoulder_link&#39;</span><span class="p">),</span>
                <span class="n">Joint</span><span class="p">(</span><span class="s1">&#39;shoulder_lift_joint&#39;</span><span class="p">,</span> <span class="s1">&#39;revolute&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;shoulder_link&#39;</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="s1">&#39;upper_arm_link&#39;</span><span class="p">),</span>
                <span class="n">Joint</span><span class="p">(</span><span class="s1">&#39;elbow_joint&#39;</span><span class="p">,</span> <span class="s1">&#39;revolute&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;upper_arm_link&#39;</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="s1">&#39;forearm_link&#39;</span><span class="p">),</span>
                <span class="n">Joint</span><span class="p">(</span><span class="s1">&#39;wrist_1_joint&#39;</span><span class="p">,</span> <span class="s1">&#39;revolute&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;forearm_link&#39;</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="s1">&#39;wrist_1_link&#39;</span><span class="p">),</span>
                <span class="n">Joint</span><span class="p">(</span><span class="s1">&#39;wrist_2_joint&#39;</span><span class="p">,</span> <span class="s1">&#39;revolute&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;wrist_1_link&#39;</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="s1">&#39;wrist_2_link&#39;</span><span class="p">),</span>
                <span class="n">Joint</span><span class="p">(</span><span class="s1">&#39;wrist_3_joint&#39;</span><span class="p">,</span> <span class="s1">&#39;revolute&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;wrist_2_link&#39;</span><span class="p">,</span> <span class="n">child</span><span class="o">=</span><span class="s1">&#39;wrist_3_link&#39;</span><span class="p">),</span>
            <span class="p">],</span> <span class="n">links</span><span class="o">=</span><span class="p">[</span>
                <span class="n">Link</span><span class="p">(</span><span class="s1">&#39;base_link&#39;</span><span class="p">),</span>
                <span class="n">Link</span><span class="p">(</span><span class="s1">&#39;shoulder_link&#39;</span><span class="p">),</span>
                <span class="n">Link</span><span class="p">(</span><span class="s1">&#39;upper_arm_link&#39;</span><span class="p">),</span>
                <span class="n">Link</span><span class="p">(</span><span class="s1">&#39;forearm_link&#39;</span><span class="p">),</span>
                <span class="n">Link</span><span class="p">(</span><span class="s1">&#39;wrist_1_link&#39;</span><span class="p">),</span>
                <span class="n">Link</span><span class="p">(</span><span class="s1">&#39;wrist_2_link&#39;</span><span class="p">),</span>
                <span class="n">Link</span><span class="p">(</span><span class="s1">&#39;wrist_3_link&#39;</span><span class="p">),</span>
            <span class="p">])</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;robot model: &quot;</span><span class="p">,</span> <span class="n">robot_model</span><span class="p">)</span>

<span class="n">robot</span> <span class="o">=</span> <span class="n">Robot</span><span class="p">(</span><span class="n">robot_model</span><span class="p">)</span>

<span class="n">point</span> <span class="o">=</span>  <span class="p">[</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
<span class="n">xaxis</span> <span class="o">=</span>  <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
<span class="n">yaxis</span> <span class="o">=</span>  <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>

<span class="n">robot_coordinate_frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">)</span>
<span class="n">robot</span><span class="o">.</span><span class="n">set_RCF</span><span class="p">(</span><span class="n">robot_coordinate_frame</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;robot coordinate frame&quot;</span><span class="p">,</span> <span class="n">robot</span><span class="o">.</span><span class="n">get_RCF</span><span class="p">())</span>

<span class="n">point</span> <span class="o">=</span>  <span class="p">[</span><span class="mf">6.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]</span>
<span class="n">xaxis</span> <span class="o">=</span>  <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
<span class="n">yaxis</span> <span class="o">=</span>  <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>

<span class="n">frame_WCF</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;frame in WCF&quot;</span><span class="p">,</span> <span class="n">frame_WCF</span><span class="p">)</span>

<span class="n">frame_RCF</span> <span class="o">=</span> <span class="n">robot</span><span class="o">.</span><span class="n">represent_frame_in_RCF</span><span class="p">(</span><span class="n">frame_WCF</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;frame in RCF&quot;</span><span class="p">,</span> <span class="n">frame_RCF</span><span class="p">)</span>

<span class="n">frame_WCF</span> <span class="o">=</span> <span class="n">robot</span><span class="o">.</span><span class="n">represent_frame_in_WCF</span><span class="p">(</span><span class="n">frame_RCF</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;frame in WCF&quot;</span><span class="p">,</span> <span class="n">frame_WCF</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="section" id="links">
<h2>Links</h2>
<ul class="simple">
<li><p><a class="reference external" href="http://www.ros.org/reps/rep-0105.html#id15">ROS REP-105: Coordinate Frames for Mobile Platforms</a></p></li>
<li><p><a class="reference external" href="http://developercenter.robotstudio.com/BlobProxy/manuals/IRC5FlexPendantOpManual/doc210.html">ABB: What is a coordinate system?</a></p></li>
</ul>
</div>
</div>

                        
                    

                </main>

                <!-- site navigation sidebar -->

                <div class="col-12 col-md-3 col-xl-2 compas-sidebar" role="navigation"> 
                    <div class="navbar-light">

                        <form id="" class="d-flex compas-searchbox" action="../search.html" method="get">
                            <input class="form-control" type="text" name="q" placeholder="Search docs" />
                            <input type="hidden" name="check_keywords" value="yes" />
                            <input type="hidden" name="area" value="default" />

                            <button class="navbar-toggler d-md-none compas-navigation-toggler" type="button" data-toggle="collapse" data-target="#compas-navigation" aria-controls="compas-navigation" aria-expanded="false" aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                        </form>

                        
                        

                            <div class="navbar-expand-md">
                                <div id="compas-navigation" class="collapse navbar-collapse compas-navigation">

                                <ul class="nav flex-column active">
<li class="nav-item"><a class="nav-link reference internal" href="../overview.html">Overview</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../getting_started.html">Getting started</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../backends.html">Working with backends</a></li>
<li class="nav-item active"><a class="nav-link reference internal" href="../examples.html">Examples</a><ul class="nav active">
<li class="nav-item"><a class="nav-link reference internal" href="01_frame_and_transformation.html">Frame and Transformation</a></li>
<li class="nav-item active"><a class="nav-link active current reference internal" href="#">Coordinate frames</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="03_kinematic_model.html">Kinematic model</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="05_simulation_with_vrep.html">Simulation examples with V-REP</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="06_ros_examples.html">Using ROS</a></li>
</ul>
</li>
<li class="nav-item"><a class="nav-link reference internal" href="../reference.html">API Reference</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../contributing.html">Contributor’s Guide</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../authors.html">Authors</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../changelog.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../license.html">License</a></li>
</ul>


                                </div>
                            </div>

                        

                    </div>
                </div>

                <!-- table of contents of main content -->
                
                <div class="d-none d-xl-block col-xl-2 compas-toc" role="toc">

                    

                    <ul class="nav flex-column" id="compas-localnav">
<li class="nav-item"><a class="nav-link reference internal" href="#">Coordinate frames</a><ul class="nav">
<li class="nav-item"><a class="nav-link reference internal" href="#world-coordinate-frame-wcf">World coordinate frame (WCF)</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#robot-coordinate-frame-rcf">Robot coordinate frame (RCF)</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#tool0-coordinate-frame-t0cf">Tool0 coordinate frame (T0CF)</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#tool-coordinate-frame-tcf">Tool coordinate frame (TCF)</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#object-coordinate-frame-ocf">Object coordinate frame (OCF)</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#example">Example</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#links">Links</a></li>
</ul>
</li>
</ul>


                </div>

            </div>
        </div>

        <footer class="compas-footer">
            
                
                    &#169; Copyright 2018, Gramazio Kohler Research.
                
            

            
                Last updated on Sep 09, 2018.
            

            
                Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
            
        </footer>

        

            <script type="text/javascript">
var DOCUMENTATION_OPTIONS = {
    URL_ROOT          : '',
    VERSION           : '0.2.1',
    COLLAPSE_INDEX    : false,
    FILE_SUFFIX       : '.html',
    HAS_SOURCE        : 'false',
    SOURCELINK_SUFFIX : '.txt'
};
            </script>

            <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>

            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
            
            <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.0.0/anchor.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>

            <script src="../_static/underscore.js"></script>
            <script src="../_static/doctools.js"></script>
            <script src="../_static/js/searchtools_.js"></script>
            <script src="../_static/js/prism.js" data-manual></script>

            <script>
$(document).ready(function() {

    $(".language-default pre").each(function(i, element) {
        Prism.highlightElement(element);
    });

    $(".language-bash pre").each(function(i, element) {
        Prism.highlightElement(element);
    });

    $(".language-python pre").each(function(i, element) {
        Prism.highlightElement(element);
    });

    $(".language-c pre").each(function(i, element) {
        Prism.highlightElement(element);
    });

    $(".language-cpp pre").each(function(i, element) {
        Prism.highlightElement(element);
    });

    $(".language-fortran pre").each(function(i, element) {
        Prism.highlightElement(element);
    });

    $(".language-markdown pre").each(function(i, element) {
        Prism.highlightElement(element);
    });

    $(".language-rest pre").each(function(i, element) {
        Prism.highlightElement(element);
    });

    anchors.add();
});
            </script>

        
    </body>
</html>